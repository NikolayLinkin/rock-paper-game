{"version":3,"sources":["serviceWorker.js","reducers/game.js","constants/ActionsTypes.js","reducers/session.js","reducers/index.js","components/WeaponsItem.js","components/PvEWeapons.js","components/GameResult.js","components/PvE.js","utils/PvEUtils.js","utils/socketUtils.js","actions/GameActions.js","selectors/commonSelectors.js","containers/PvEContainer.js","components/RoomsList.js","components/popups/PopupCreateRoom.js","components/popups/PopupLogin.js","components/PvP.js","constants/ApiConstants.js","actions/PvPActions.js","containers/PvPContainer.js","utils/apiUtils.js","components/Weapons.js","components/Room.js","containers/RoomContainer.js","components/ChooseGameMode.js","components/Root.js","containers/RootContainer.js","index.js","store/createStore.js"],"names":["Boolean","window","location","hostname","match","initialState","finish","canStart","result","enemyRate","selectedWeapon","message","game","state","action","type","playerRate","gameResult","socketId","rooms","currentRoom","userName","errStatus","errText","session","id","rootReducer","combineReducers","WeaponItem","name","chooseWeapon","className","checked","onChange","hidden","PvEWeapons","props","handleSubmit","e","preventDefault","applyChoose","setState","error","startNewGame","timer","this","gameFinish","onSubmit","onClick","Component","GameResult","resultClass","classNames","PvE","playPvEGame","startNewPveGame","rates","playWithAi","aiRate","Math","floor","random","emitApi","event","data","Promise","resolve","reject","socket","emit","res","status","userJoin","roomName","emitRate","rate","dispatch","a","getGameResult","getEnemyRate","getPlayerRate","getGameMessage","getGameFinish","getGameCanStart","getRooms","getSessionErrorStatus","getSessionErrorText","getCurrentRoom","getUserName","connect","RoomsList","joinInRoom","map","room","key","PopupCreateRoom","current","value","length","React","createRef","needRoomName","closePopup","placeholder","ref","PopupLogin","login","chooseRoom","errorText","PvP","togglePopup","popupName","openPopupName","sessionErrStatus","connectToServer","fetchRooms","nextProps","nextState","nextContext","history","push","roomsList","sessionErrText","withRouter","GET_ROOMS","gameWinnerSuccess","joinInRoomError","joinInRoomSuccess","console","log","gameMessage","getState","io","socketApi","on","winnerId","draw","hasOwnProperty","leaveFromServer","disconnect","fetch","callApi","then","response","ok","json","catch","Weapons","stopTimer","startTimer","setInterval","time","timerStarted","resetTimer","clearInterval","prevProps","prevState","style","margin","disabled","defaultProps","Room","leave","leaveFromRoom","ChooseGameMode","to","Root","exact","path","component","PvEContainer","PvPContainer","RoomContainer","ReactDOM","render","store","composedEnhancers","composeWithDevTools","applyMiddleware","thunkMiddleware","createStore","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fca2a6ed.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as types from \"../constants/ActionsTypes\";\r\n\r\nconst initialState = {\r\n    finish: false,\r\n    canStart: false,\r\n    result: null,\r\n    enemyRate: null,\r\n    selectedWeapon: null,\r\n    message: null,\r\n};\r\n\r\nconst game = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case types.GAME_RESET: {\r\n            return {\r\n                ...initialState,\r\n            }\r\n        }\r\n\r\n        case types.GAME_START: {\r\n            return {\r\n                ...state,\r\n                finish: false,\r\n                result: null,\r\n                enemyRate: null,\r\n                playerRate: null,\r\n            }\r\n        }\r\n        case types.GAME_FINISH: {\r\n            return {\r\n                ...state,\r\n                result: action.gameResult,\r\n                enemyRate: action.enemyRate,\r\n                playerRate: action.playerRate,\r\n                canStart: true,\r\n                finish: true,\r\n            }\r\n        }\r\n        case types.GAME_CAN_START: {\r\n            return {\r\n                ...state,\r\n                canStart: true,\r\n            }\r\n        }\r\n\r\n        case types.GAME_CANT_START: {\r\n            return {\r\n                ...state,\r\n                canStart: false,\r\n                finish: true,\r\n            }\r\n        }\r\n\r\n        case types.GAME_UPDATE_STATUS: {\r\n            return {\r\n                ...state,\r\n                message: action.message,\r\n            }\r\n        }\r\n        default: return state;\r\n    }\r\n};\r\n\r\nexport default game;","export const GAME_START = \"GAME_START\";\r\nexport const GAME_START_PVP = \"GAME_START_PVP\";\r\nexport const GAME_UPDATE_STATUS = \"GAME_UPDATE_STATUS\";\r\nexport const GAME_FINISH = \"GAME_FINISH\";\r\nexport const GAME_CAN_START = \"GAME_CAN_START\";\r\nexport const GAME_CANT_START = \"GAME_CANT_START\";\r\nexport const GAME_RESET = \"GAME_RESET\";\r\nexport const UPDATE_GAME_HISTORY = \"UPDATE_GAME_HISTORY\";\r\nexport const GAME_SELECTED_WEAPON = \"GAME_SELECTED_WEAPON\";\r\nexport const GAME_CHANGE_MODE = \"GAME_CHANGE_MODE\";\r\n\r\nexport const SAVE_SOCKET_ID = \"SAVE_USER_ID\";\r\nexport const SAVE_USER_NAME = \"SAVE_USER_NAME\";\r\nexport const FETCH_ROOMS = \"FETCH_ROOMS\";\r\n\r\nexport const ROOM_JOIN_SUCCESS = \"ROOM_JOIN_SUCCESS\";\r\nexport const ROOM_JOIN_ERROR = \"ROOM_JOIN__ERROR\";\r\nexport const ROOM_LEAVE = \"ROOM_LEAVE\";","import * as types from \"../constants/ActionsTypes\";\r\n\r\nconst initialState = {\r\n    socketId: null,\r\n    rooms: [],\r\n    currentRoom: null,\r\n    userName: null,\r\n    errStatus: null,\r\n    errText: null,\r\n};\r\n\r\nconst session = (state=initialState, action) => {\r\n    switch (action.type) {\r\n        case types.SAVE_SOCKET_ID: {\r\n            return {\r\n                ...state,\r\n                socketId: action.id,\r\n            }\r\n        }\r\n\r\n        case types.SAVE_USER_NAME: {\r\n            return {\r\n                ...state,\r\n                userName: action.userName,\r\n            }\r\n        }\r\n\r\n        case types.FETCH_ROOMS: {\r\n            return {\r\n                ...state,\r\n                rooms: [...action.rooms],\r\n            }\r\n        }\r\n\r\n\r\n        case types.ROOM_JOIN_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                currentRoom: action.currentRoom,\r\n                userName: action.userName,\r\n                socketId: action.socketId,\r\n                errText: \"\",\r\n                errStatus: \"\",\r\n            }\r\n        }\r\n\r\n        case types.ROOM_JOIN_ERROR: {\r\n            return {\r\n                ...state,\r\n                errText: action.errText,\r\n                errStatus: action.errStatus,\r\n            }\r\n        }\r\n\r\n        case types.ROOM_LEAVE: {\r\n            return {\r\n                ...state,\r\n                currentRoom: null,\r\n                socketId: null,\r\n                userName: null,\r\n            }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n};\r\n\r\nexport default session;","import {combineReducers} from \"redux\";\r\n\r\nimport game from \"./game\";\r\nimport session from \"./session\";\r\n\r\nconst rootReducer = combineReducers({\r\n    game,\r\n    session,\r\n});\r\n\r\nexport default rootReducer;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    chooseWeapon: PropTypes.func.isRequired,\r\n};\r\n\r\nconst WeaponItem = ({name, chooseWeapon, selectedWeapon}) => {\r\n\r\n    return (\r\n        <label className=\"weapons__item\">\r\n            <input className=\"weapons__item__inp\"\r\n                   checked={selectedWeapon===name}\r\n                   onChange={() => chooseWeapon(name)}\r\n                   type=\"radio\" name=\"weapon\" hidden/>\r\n            <span className={`weapons__item__span weapons__item__span--${name}`}/>\r\n            {name}\r\n        </label>\r\n    )\r\n};\r\n\r\nWeaponItem.propTypes = propTypes;\r\nexport default WeaponItem;","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport WeaponItem from \"./WeaponsItem\";\r\n\r\nclass PvEWeapons extends Component {\r\n    static propTypes = {\r\n        applyChoose: PropTypes.func.isRequired,\r\n        startNewGame: PropTypes.func.isRequired,\r\n        gameFinish: PropTypes.bool.isRequired,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.timer = null;\r\n\r\n        this.state = {\r\n            selectedWeapon: '',\r\n            error: '',\r\n        };\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const {selectedWeapon} = this.state;\r\n        const {\r\n            applyChoose,\r\n        } = this.props;\r\n\r\n\r\n        if (!selectedWeapon) {\r\n            this.setState(state => ({error: 'Нужно выбрать предмет'}));\r\n            return false;\r\n        }\r\n        applyChoose(selectedWeapon);\r\n    };\r\n\r\n    startNewGame = (e) => {\r\n        e.preventDefault();\r\n        const {startNewGame} = this.props;\r\n        this.setState(state => ({selectedWeapon: ''}));\r\n        startNewGame();\r\n    };\r\n\r\n    chooseWeapon = (name) => {\r\n        this.setState(state => ({selectedWeapon: name}));\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            error,\r\n            selectedWeapon,\r\n        } = this.state;\r\n        const {gameFinish} = this.props;\r\n\r\n        return (\r\n            <form onSubmit={this.handleSubmit}>\r\n                {error ? <div className=\"weapons__error\">{error}</div> : ''}\r\n                <div className=\"weapons\">\r\n                    <WeaponItem chooseWeapon={this.chooseWeapon}\r\n                                selectedWeapon={selectedWeapon}\r\n                                name={'rock'}/>\r\n                    <WeaponItem chooseWeapon={this.chooseWeapon}\r\n                                selectedWeapon={selectedWeapon}\r\n                                name={'scissors'}/>\r\n                    <WeaponItem chooseWeapon={this.chooseWeapon}\r\n                                selectedWeapon={selectedWeapon}\r\n                                name={'paper'}/>\r\n                </div>\r\n\r\n                {gameFinish ?\r\n                    <button onClick={this.startNewGame} className=\"weapons__btn\">\r\n                        Начать новую игру\r\n                    </button>\r\n                    :\r\n                    <button type=\"submit\" className=\"weapons__btn\">\r\n                        Подтвердить выбор\r\n                    </button>\r\n                }\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PvEWeapons;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\n\r\n\r\nconst propTypes = {\r\n    enemyRate: PropTypes.string.isRequired,\r\n    playerRate: PropTypes.string.isRequired,\r\n    gameResult: PropTypes.string.isRequired,\r\n};\r\n\r\nconst GameResult = ({enemyRate, playerRate, gameResult}) => {\r\n    const resultClass = classNames({\r\n        \"result__finish\": true,\r\n        \"result__finish--win\": gameResult === \"win\",\r\n        \"result__finish--lose\": gameResult === \"lose\",\r\n        \"result__finish--draw\": gameResult === \"draw\",\r\n    });\r\n\r\n    return (\r\n        <div className=\"result\">\r\n            <div className=\"result__items\">\r\n                <div className=\"result__item\">\r\n                    <span>Ваш выбор:</span>\r\n                    <div className={`result__item__ico result__item__ico--${playerRate}`}/>\r\n                </div>\r\n                <div className=\"result__item--vs\">\r\n                    VS\r\n                </div>\r\n                <div className=\"result__item\">\r\n                    <span>Выбор противника:</span>\r\n                    <div className={`result__item__ico result__item__ico--${enemyRate}`}/>\r\n                </div>\r\n            </div>\r\n            <div className={resultClass}>\r\n                {gameResult !== \"draw\" ? \"You:\" : \"\"} {gameResult}\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nGameResult.propTypes = propTypes;\r\nexport default GameResult;","import React, {Component} from \"react\";\r\n\r\nimport PvEWeapons from \"../components/PvEWeapons\";\r\nimport GameResult from \"./GameResult\";\r\n\r\nclass PvE extends Component {\r\n    render() {\r\n        const {\r\n            playPvEGame,\r\n            startNewPveGame,\r\n            enemyRate,\r\n            playerRate,\r\n            gameResult,\r\n            gameFinish,\r\n        } = this.props;\r\n\r\n        return (\r\n            <div className=\"wrapper\">\r\n                <h2 className=\"title\">\r\n                    Для начала игры, нужно выбрать позицию:\r\n                </h2>\r\n                <PvEWeapons applyChoose={playPvEGame}\r\n                         startNewGame={startNewPveGame}\r\n                         gameFinish={gameFinish}\r\n                />\r\n\r\n                {gameFinish ?\r\n                    <GameResult enemyRate={enemyRate}\r\n                                playerRate={playerRate}\r\n                                gameResult={gameResult}\r\n                    />\r\n                    : ''\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PvE;","const PAPER = \"paper\";\r\nconst SCISSORS = \"scissors\";\r\nconst ROCK = \"rock\";\r\n\r\nconst rates = [PAPER, SCISSORS, ROCK];\r\nconst getAiRate = () => rates[Math.floor(Math.random() * 3)];\r\n\r\nexport const playWithAi = (playerRate) => {\r\n    const aiRate = getAiRate();\r\n\r\n    if(playerRate === aiRate) {\r\n        return {gameResult: 'draw', aiRate};\r\n    }\r\n\r\n    if(\r\n        (playerRate === PAPER && aiRate === ROCK) ||\r\n        (playerRate === SCISSORS && aiRate === PAPER) ||\r\n        (playerRate === ROCK && aiRate === SCISSORS)\r\n    ) {\r\n        return {gameResult: 'win', aiRate};\r\n    }\r\n\r\n    return {gameResult: 'lose', aiRate};\r\n};","import io from \"socket.io-client\";\r\n\r\n/**\r\n * emit события\r\n * @param event {string}\r\n * @param data {object}\r\n * @returns {Promise<>}\r\n */\r\nconst emitApi = (event, data) => {\r\n      return new Promise((resolve, reject) => {\r\n         if(!socket) {\r\n             reject('No socketApi connection');\r\n         }\r\n\r\n         socket.emit(event, data, (res) => {\r\n             if(res.status === \"Error\" || res.error) {\r\n                 const error = {\r\n                   errText: res.error,\r\n                   errStatus: res.status,\r\n                 };\r\n                 reject(error);\r\n             }\r\n\r\n             resolve(res);\r\n         })\r\n      });\r\n};\r\n\r\nlet socket = null;\r\nconst endpoint = \"http://localhost:3005\";\r\n\r\nexport const connect = () => {\r\n    socket = io.connect(endpoint);\r\n\r\n    return socket;\r\n};\r\n\r\nexport const disconnect = () => {socket.disconnect(); socket = null;};\r\n\r\n/**\r\n *\r\n * @param userName {string} имя пользователя\r\n * @param roomName {string} название комнаты\r\n * @returns {Promise}\r\n */\r\nexport const userJoin = (userName, roomName) => emitApi('userJoin', {userName, roomName});\r\n\r\nexport const userLeave = roomName => emitApi('userLeave', {roomName});\r\n\r\n/**\r\n * отправка ставки на сервер\r\n * @param rate {string} ставка\r\n * @returns {Promise}\r\n */\r\nexport const emitRate = (rate) => emitApi('userRate', {rate});\r\n\r\nexport const playAgain = () => emitApi('playAgain', ({}));","import * as types from \"../constants/ActionsTypes\";\r\nimport {playWithAi} from \"../utils/PvEUtils\";\r\nimport {playAgain} from \"../utils/socketUtils\";\r\n\r\n\r\nconst gameFinish = (gameResult, enemyRate, playerRate) => ({\r\n    type: types.GAME_FINISH,\r\n    gameResult,\r\n    enemyRate,\r\n    playerRate,\r\n});\r\n\r\nexport const playPvEGame = (playerRate) => dispatch => {\r\n    const {gameResult, aiRate} = playWithAi(playerRate);\r\n\r\n    dispatch(gameFinish(gameResult, aiRate, playerRate));\r\n};\r\n\r\nexport const startNewPveGame =() => dispatch => {\r\n    dispatch({type: types.GAME_RESET});\r\n    dispatch({type: types.GAME_START});\r\n};\r\n\r\nexport const startNewGame = () => async dispatch => {\r\n    dispatch({type: types.GAME_RESET});\r\n    await playAgain();\r\n    dispatch({type: types.GAME_START});\r\n};","export const getGameResult = state => state.game.result;\r\nexport const getEnemyRate = state => state.game.enemyRate;\r\nexport const getPlayerRate = state => state.game.playerRate;\r\nexport const getGameMessage = state => state.game.message;\r\n\r\nexport const getGameHistory = state => state.game.history;\r\nexport const getGameFinish = state => state.game.finish;\r\nexport const getGameCanStart = state => state.game.canStart;\r\n\r\nexport const getRooms = state => state.session.rooms;\r\nexport const getSessionErrorStatus = state => state.session.errStatus;\r\nexport const getSessionErrorText = state => state.session.errText;\r\nexport const getCurrentRoom = state => state.session.currentRoom;\r\nexport const getUserName = state => state.session.userName;","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport PvE from \"../components/PvE\";\r\n\r\nimport {\r\n    playPvEGame,\r\n    startNewPveGame,\r\n} from \"../actions/GameActions\";\r\n\r\nimport {\r\n    getEnemyRate,\r\n    getPlayerRate,\r\n    getGameResult,\r\n    getGameFinish,\r\n} from \"../selectors/commonSelectors\";\r\n\r\nconst PvEContainer = props => <PvE {...props}/>;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        enemyRate: getEnemyRate(state),\r\n        playerRate: getPlayerRate(state),\r\n        gameResult: getGameResult(state),\r\n        gameFinish: getGameFinish(state),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    playPvEGame,\r\n    startNewPveGame,\r\n})(PvEContainer);","import React from \"react\";\r\n\r\nconst RoomsList = ({rooms, joinInRoom}) => {\r\n    return (\r\n        <div className=\"rooms\">\r\n            <h3 className=\"rooms__title\">Свободные комнаты:</h3>\r\n            {rooms.map(room =>\r\n                <div key={room.id}\r\n                     className=\"room-preview\"\r\n                     onClick={() => {joinInRoom(room.name)}}>\r\n                    {room.name}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default RoomsList;","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass PopupCreateRoom extends Component {\r\n    static propTypes = {\r\n        joinInRoom: PropTypes.func.isRequired,\r\n        closePopup: PropTypes.func.isRequired,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.userName = React.createRef();\r\n        this.roomName = React.createRef();\r\n\r\n        this.state = {\r\n            error: '',\r\n            needRoomName: false,\r\n        };\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const {joinInRoom} = this.props;\r\n        const userName = this.userName.current.value;\r\n        const roomName = this.roomName.current.value;\r\n\r\n        if (!userName.length || !roomName.length) {\r\n            this.setState(state => ({error: 'Заполните все поля формы'}));\r\n            return false;\r\n        }\r\n\r\n        joinInRoom(userName, roomName);\r\n\r\n        this.userName.current.value = '';\r\n        this.roomName.current.value = '';\r\n    };\r\n\r\n    render() {\r\n        const {error} = this.state;\r\n        const {closePopup} = this.props;\r\n\r\n        return (\r\n            <div className=\"popup\">\r\n                <form onSubmit={this.handleSubmit}>\r\n                    {error ? <div className=\"popup__error\">{error}</div> : ''}\r\n\r\n                    <input className=\"popup__input\"\r\n                           placeholder=\"Имя игрока\"\r\n                           ref={this.userName} type=\"text\"/>\r\n\r\n                    <input className=\"popup__input\"\r\n                           placeholder=\"Название комнаты\"\r\n                           ref={this.roomName} type=\"text\"/>\r\n\r\n                    <button className=\"popup__btn\">\r\n                        Подтвердить\r\n                    </button>\r\n                    <button onClick={closePopup}\r\n                            className=\"popup__btn popup__btn--close\">\r\n                        Отмена\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PopupCreateRoom;","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass PopupLogin extends Component {\r\n    static propTypes = {\r\n        joinInRoom: PropTypes.func.isRequired,\r\n        closePopup: PropTypes.func.isRequired,\r\n        roomName: PropTypes.string,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.userName = React.createRef();\r\n\r\n        this.state = {\r\n            error: '',\r\n        };\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const userName = this.userName.current.value;\r\n        const {\r\n            joinInRoom,\r\n            login,\r\n            closePopup,\r\n            chooseRoom,\r\n        } = this.props;\r\n\r\n        if (!userName.length) {\r\n            this.setState(state => ({error: 'Заполните имя'}));\r\n            return false;\r\n        }\r\n\r\n        if(chooseRoom) {\r\n            joinInRoom(userName, chooseRoom);\r\n        } else {\r\n            login(userName);\r\n            closePopup();\r\n        }\r\n\r\n        this.userName.current.value = '';\r\n    };\r\n\r\n    render() {\r\n        const {error} = this.state;\r\n        const {closePopup, errorText} = this.props;\r\n\r\n        return (\r\n            <div className=\"popup\">\r\n                <div className=\"popup__inner\">\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        {error ? <div className=\"popup__error\">{error}</div> : ''}\r\n                        {errorText ? <div className=\"popup__error\">{errorText}</div> : ''}\r\n\r\n                        <input className=\"popup__input\"\r\n                               placeholder=\"Имя игрока\"\r\n                               ref={this.userName} type=\"text\"/>\r\n\r\n                        <button className=\"popup__btn\">\r\n                            Подтвердить\r\n                        </button>\r\n                        <button className=\"popup__btn popup__btn--close\"\r\n                                onClick={closePopup}>\r\n                            Отмена\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PopupLogin;","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nimport RoomsList from \"./RoomsList\";\r\nimport PopupCreateRoom from \"./popups/PopupCreateRoom\";\r\nimport PopupLogin from \"./popups/PopupLogin\";\r\n\r\n//TODO: Вынести попапы\r\n\r\nclass PvP extends Component {\r\n    static propTypes = {\r\n        connectToServer: PropTypes.func.isRequired,\r\n        leaveFromServer: PropTypes.func.isRequired,\r\n        fetchRooms: PropTypes.func.isRequired,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            openPopupName: \"\",\r\n            chooseRoom: \"\",\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            connectToServer,\r\n            fetchRooms,\r\n        } = this.props;\r\n\r\n        connectToServer();\r\n        fetchRooms();\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        const {currentRoom, userName} = nextProps;\r\n        if (currentRoom && userName) {\r\n            this.props.history.push(`/pvp/rooms/${currentRoom}`);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    togglePopup = (popupName) => {\r\n        this.setState(state => ({openPopupName: popupName}));\r\n    };\r\n\r\n    closePopup = () => {\r\n        this.togglePopup(\"none\");\r\n    };\r\n\r\n    joinInRoom = (roomName) => {\r\n        const {\r\n            joinInRoom,\r\n            userName,\r\n            sessionErrStatus,\r\n        } = this.props;\r\n\r\n        if (sessionErrStatus === \"Error\") {\r\n            this.togglePopup('login');\r\n        }\r\n\r\n        if (userName) {\r\n            joinInRoom(userName, roomName);\r\n        } else {\r\n            this.togglePopup('login');\r\n            this.setState(state => ({chooseRoom: roomName}));\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            roomsList,\r\n            joinInRoom,\r\n            login,\r\n            sessionErrText,\r\n        } = this.props;\r\n\r\n\r\n        const {\r\n            openPopupName,\r\n            chooseRoom,\r\n        } = this.state;\r\n\r\n        return (\r\n            <div className=\"wrapper\">\r\n                {!roomsList.length ?\r\n                    <div className=\"rooms--empty\">Нет свободных комнат</div> :\r\n                    <RoomsList rooms={roomsList} joinInRoom={this.joinInRoom}/>\r\n                }\r\n                <button className=\"rooms__create-btn\"\r\n                        onClick={() => {this.togglePopup('create-room')}}>\r\n                    Создать комнату\r\n                </button>\r\n\r\n                {openPopupName === \"create-room\" ?\r\n                    <PopupCreateRoom joinInRoom={joinInRoom}\r\n                                     closePopup={this.closePopup}\r\n                    /> : ''}\r\n\r\n                {openPopupName === \"login\" ?\r\n                    <PopupLogin joinInRoom={joinInRoom}\r\n                                login={login}\r\n                                chooseRoom={chooseRoom}\r\n                                errorText={sessionErrText}\r\n                                closePopup={this.closePopup}\r\n                    /> : ''}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(PvP);","const API_ROOT = \"http://localhost:3005\";\r\n\r\nexport const GET_ROOMS = `${API_ROOT}/api/rooms`;","import * as socket from \"../utils/socketUtils\";\r\nimport * as types from \"../constants/ActionsTypes\";\r\nimport {GET_ROOMS} from \"../constants/ApiConstants\";\r\nimport {callApi} from \"../utils/apiUtils\";\r\nimport {FETCH_ROOMS} from \"../constants/ActionsTypes\";\r\n\r\nconst gameWinnerSuccess = (gameResult, enemyRate, playerRate) => ({\r\n    type: types.GAME_FINISH,\r\n    gameResult,\r\n    enemyRate,\r\n    playerRate,\r\n});\r\n\r\nexport const connectToServer = () => async (dispatch, getState) => {\r\n    const socketApi = await socket.connect();\r\n\r\n    socketApi.on('checkStatus', res => {\r\n        const {canStart} = res;\r\n\r\n        if (canStart) {\r\n            dispatch({type: types.GAME_CAN_START});\r\n        } else {\r\n            dispatch({type: types.GAME_CANT_START});\r\n            dispatch({type: types.GAME_RESET});\r\n        }\r\n    });\r\n\r\n    /**\r\n     * res = {winnerId, rates, draw}\r\n     */\r\n    socketApi.on('getWinner', res => {\r\n        const {winnerId, rates, draw} = res;\r\n\r\n        const state = getState();\r\n        const socketId = state.session.socketId;\r\n\r\n        let gameResult = null,\r\n            enemyRate = null,\r\n            playerRate = null;\r\n\r\n        for (let rate in rates) {\r\n            if (rates.hasOwnProperty(rate)) {\r\n                if (rate === socketId) {\r\n                    playerRate = rates[rate];\r\n                } else {\r\n                    enemyRate = rates[rate];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (draw) {\r\n            gameResult = \"draw\";\r\n        } else if (winnerId === socketId) {\r\n            gameResult = \"win\";\r\n        } else {\r\n            gameResult = \"lose\";\r\n        }\r\n\r\n        //TODO: сделать 3 события GAME_DRAW, GAME_LOSE, GAME_WIN,\r\n        dispatch(gameWinnerSuccess(gameResult, enemyRate, playerRate));\r\n    });\r\n\r\n};\r\nexport const leaveFromServer = () => async dispatch => {\r\n    await socket.disconnect();\r\n    dispatch({type: types.ROOM_LEAVE, currentRoom: null});\r\n};\r\n\r\nexport const leaveFromRoom = () => async dispatch => {\r\n    await socket.userLeave();\r\n    dispatch({type: types.ROOM_LEAVE, currentRoom: null});\r\n};\r\n\r\nexport const fetchRooms = () => async dispatch => {\r\n    const {rooms} = await callApi(GET_ROOMS);\r\n    dispatch({type: FETCH_ROOMS, rooms});\r\n};\r\n\r\nconst joinInRoomError = (errText, errStatus) => ({\r\n    type: types.ROOM_JOIN_ERROR,\r\n    errText,\r\n    errStatus,\r\n});\r\n\r\nconst joinInRoomSuccess = (currentRoom, userName, socketId) => ({\r\n    type: types.ROOM_JOIN_SUCCESS,\r\n    currentRoom,\r\n    userName,\r\n    socketId,\r\n});\r\n\r\n//TODO: подумать как лучше проверять ограничение создания 2х комнат с одиноковым именем,\r\n// по параметру или по названию события\r\n/**\r\n * Создание новой комнаты\r\n * @param userName {string} имя игрока\r\n * @param roomName {string} название комнаты\r\n * @returns {Function}\r\n */\r\nexport const joinInRoom = (userName, roomName) => async dispatch => {\r\n    try {\r\n        const {socketId} = await socket.userJoin(userName, roomName);\r\n        dispatch(joinInRoomSuccess(roomName, userName, socketId));\r\n    } catch (error) {\r\n        const {errText, errStatus} = error;\r\n        dispatch(joinInRoomError(errText, errStatus));\r\n    }\r\n};\r\n\r\nexport const login = (userName) => ({\r\n    type: types.SAVE_USER_NAME,\r\n    userName,\r\n});\r\n\r\n\r\n//TODO: переделать(выводить ошибку)\r\nexport const emitRate = rate => async dispatch => {\r\n    const {error} = await socket.emitRate(rate);\r\n\r\n    if(error) {\r\n        console.log(error);\r\n    }\r\n};","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport PvP from \"../components/PvP\";\r\n\r\nimport {\r\n    connectToServer,\r\n    leaveFromServer,\r\n    fetchRooms,\r\n    joinInRoom,\r\n    emitRate,\r\n    login,\r\n} from \"../actions/PvPActions\";\r\n\r\nimport {\r\n    startNewGame,\r\n} from \"../actions/GameActions\";\r\n\r\nimport {\r\n    getRooms,\r\n    getCurrentRoom,\r\n    getUserName,\r\n    getGameMessage,\r\n    getSessionErrorText,\r\n    getSessionErrorStatus,\r\n} from \"../selectors/commonSelectors\";\r\n\r\nconst PvPContainer = props => <PvP {...props}/>;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        roomsList: getRooms(state),\r\n        currentRoom: getCurrentRoom(state),\r\n        userName: getUserName(state),\r\n        gameMessage: getGameMessage(state),\r\n        sessionErrText: getSessionErrorText(state),\r\n        sessionErrStatus: getSessionErrorStatus(state),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    connectToServer,\r\n    leaveFromServer,\r\n    fetchRooms,\r\n    joinInRoom,\r\n    emitRate,\r\n    startNewGame,\r\n    login,\r\n})(PvPContainer);","export const callApi = (url, options) => {\r\n    return fetch(url, options)\r\n        .then(\r\n            response => response.ok ? response.json() : Promise.reject(response),\r\n            error => Promise.reject(error),\r\n        )\r\n        .then(\r\n            json => json ? json : Promise.reject(json),\r\n            error => ({error}),\r\n        )\r\n        .catch(\r\n            error => ({error})\r\n        )\r\n};","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport WeaponItem from \"./WeaponsItem\";\r\n\r\nclass Weapons extends Component {\r\n    static propTypes = {\r\n        applyChoose: PropTypes.func.isRequired,\r\n        startNewGame: PropTypes.func.isRequired,\r\n        gameFinish: PropTypes.bool.isRequired,\r\n        canStart: PropTypes.bool,\r\n    };\r\n\r\n    static defaultProps = {\r\n        canStart: true,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.timer = null;\r\n\r\n        this.state = {\r\n            selectedWeapon: '',\r\n            time: 30,\r\n            timerStarted: false,\r\n            error: '',\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.canStart && !this.state.timerStarted) {\r\n            this.startTimer();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const {canStart, applyChoose} = this.props;\r\n        const {time, timerStarted} = this.state;\r\n\r\n        if(prevProps.canStart !== canStart) {\r\n            if (canStart && !timerStarted) {\r\n                this.startTimer();\r\n            }\r\n        }\r\n\r\n        if (time === 0) {\r\n            this.stopTimer();\r\n\r\n            const rates = ['rock', 'paper', 'scissors'];\r\n            const rate = rates[Math.floor(Math.random() * 3)];\r\n            applyChoose(rate);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.stopTimer();\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const {selectedWeapon} = this.state;\r\n        const {\r\n            applyChoose,\r\n        } = this.props;\r\n\r\n\r\n        if (!selectedWeapon) {\r\n            this.setState(state => ({error: 'Нужно выбрать предмет'}));\r\n            return false;\r\n        }\r\n        this.stopTimer();\r\n        applyChoose(selectedWeapon);\r\n    };\r\n\r\n    startTimer = () => {\r\n        this.timer = setInterval(() => this.setState({\r\n            time: this.state.time - 1\r\n        }), 1000);\r\n\r\n        this.setState(state => ({timerStarted: true}));\r\n    };\r\n\r\n    resetTimer = () => {\r\n        this.setState(state => ({\r\n            timerStarted: false,\r\n            time: 30,\r\n        }))\r\n    };\r\n\r\n    stopTimer = () => {\r\n        this.resetTimer();\r\n        clearInterval(this.timer);\r\n    };\r\n\r\n    startNewGame = (e) => {\r\n        e.preventDefault();\r\n        const {startNewGame} = this.props;\r\n        this.setState(state => ({selectedWeapon: ''}));\r\n        this.resetTimer();\r\n        startNewGame();\r\n    };\r\n\r\n    chooseWeapon = (name) => {\r\n        this.setState(state => ({selectedWeapon: name, error: \"\"}));\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            error,\r\n            selectedWeapon,\r\n            time,\r\n        } = this.state;\r\n        const {gameFinish, canStart} = this.props;\r\n\r\n        return (\r\n            <form onSubmit={this.handleSubmit}>\r\n                {error ? <div className=\"weapons__error\">{error}</div> : ''}\r\n                <div className=\"weapons\">\r\n                    <WeaponItem chooseWeapon={this.chooseWeapon}\r\n                                selectedWeapon={selectedWeapon}\r\n                                name={'rock'}/>\r\n                    <WeaponItem chooseWeapon={this.chooseWeapon}\r\n                                selectedWeapon={selectedWeapon}\r\n                                name={'scissors'}/>\r\n                    <WeaponItem chooseWeapon={this.chooseWeapon}\r\n                                selectedWeapon={selectedWeapon}\r\n                                name={'paper'}/>\r\n                </div>\r\n\r\n                <div style={{margin: '50px'}}>\r\n                    {!canStart ? 'Ожидание других игроков' :\r\n                        <div className=\"timer\">\r\n                            Остаток времени на выбор: {time}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                {gameFinish && canStart ?\r\n                    <button onClick={this.startNewGame} className=\"weapons__btn\">\r\n                        Начать новую игру\r\n                    </button>\r\n                    :\r\n                    <button type=\"submit\" className=\"weapons__btn\" disabled={!canStart}>\r\n                        Подтвердить выбор\r\n                    </button>\r\n                }\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Weapons;","import React, {Component} from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Weapons from \"./Weapons\";\r\nimport GameResult from \"./GameResult\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nclass Room extends Component {\r\n    static propTypes = {\r\n        leaveFromRoom: PropTypes.func.isRequired,\r\n        emitRate: PropTypes.func.isRequired,\r\n        gameFinish: PropTypes.bool.isRequired,\r\n        startNewGame: PropTypes.func.isRequired,\r\n        enemyRate: PropTypes.string,\r\n        playerRate: PropTypes.string,\r\n        gameResult: PropTypes.string,\r\n        currentRoom: PropTypes.string,\r\n    };\r\n\r\n    componentDidMount() {\r\n        if(!this.props.currentRoom) {\r\n            this.props.history.push('/pvp');\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n        const {currentRoom} = nextProps;\r\n        if(!currentRoom) {\r\n            this.props.history.push('/pvp');\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.leaveFromRoom();\r\n    }\r\n\r\n    leave = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.props.history.push('/pvp');\r\n    };\r\n\r\n    render () {\r\n        const {\r\n            emitRate,\r\n            gameFinish,\r\n            startNewGame,\r\n            enemyRate,\r\n            playerRate,\r\n            gameResult,\r\n            canStart,\r\n            currentRoom,\r\n        } = this.props;\r\n        return (\r\n            <div className=\"wrapper\">\r\n                <h2 className=\"room__title\">\r\n                    Комната {currentRoom}\r\n                </h2>\r\n                <button className=\"room__leave-btn\"\r\n                        onClick={this.leave}>\r\n                    Выйти из комнаты\r\n                </button>\r\n\r\n                <Weapons applyChoose={emitRate}\r\n                         gameFinish={gameFinish}\r\n                         startNewGame={startNewGame}\r\n                         canStart={canStart}\r\n                         playerRate={playerRate}\r\n                />\r\n\r\n                {gameFinish && canStart ?\r\n                    <GameResult enemyRate={enemyRate}\r\n                                playerRate={playerRate}\r\n                                gameResult={gameResult}\r\n                    /> : \"\"}\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Room);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport Room from \"../components/Room\";\r\n\r\nimport {\r\n    leaveFromRoom,\r\n    emitRate,\r\n} from \"../actions/PvPActions\";\r\n\r\nimport {\r\n    startNewGame,\r\n} from \"../actions/GameActions\";\r\n\r\n\r\nimport {\r\n    getCurrentRoom,\r\n    getGameFinish,\r\n    getGameResult,\r\n    getPlayerRate,\r\n    getEnemyRate,\r\n    getGameCanStart,\r\n} from \"../selectors/commonSelectors\";\r\n\r\nconst RoomContainer = props => <Room {...props}/>;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        enemyRate: getEnemyRate(state),\r\n        gameFinish: getGameFinish(state),\r\n        gameResult: getGameResult(state),\r\n        currentRoom: getCurrentRoom(state),\r\n        playerRate: getPlayerRate(state),\r\n        canStart: getGameCanStart(state),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    leaveFromRoom,\r\n    emitRate,\r\n    startNewGame,\r\n})(RoomContainer);","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst ChooseGameMode = () => {\r\n    return (\r\n        <div className=\"game-mode__btns\">\r\n            <Link to=\"/pve\" className=\"game-mode__btn game-mode__btn--pve\">\r\n                PVE\r\n            </Link>\r\n            <Link to=\"/pvp\" className=\"game-mode__btn game-mode__btn--pvp\">\r\n                PVP\r\n            </Link>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChooseGameMode;","import React, {Component} from \"react\";\r\nimport {Route} from \"react-router-dom\";\r\nimport PvEContainer from \"../containers/PvEContainer\";\r\nimport PvPContainer from \"../containers/PvPContainer\";\r\nimport RoomContainer from \"../containers/RoomContainer\";\r\nimport ChooseGameMode from \"./ChooseGameMode\";\r\n\r\n\r\nclass Root extends Component {\r\n\r\n    render() {\r\n\r\n        return (\r\n            <>\r\n                <Route exact path=\"/\" component={ChooseGameMode}/>\r\n                <Route exact path=\"/pve\" component={PvEContainer}/>\r\n                <Route exact path=\"/pvp\" component={PvPContainer}/>\r\n                <Route exact path=\"/pvp/rooms/:id\" component={RoomContainer}/>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Root;","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport Root from \"../components/Root\";\r\n\r\nconst RootContainer = props => <Root {...props}/>;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n\r\n})(RootContainer);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {Provider} from \"react-redux\";\r\nimport createStore from \"./store/createStore\";\r\nimport \"normalize.css\";\r\nimport \"./styles/styles.scss\";\r\nimport RootContainer from \"./containers/RootContainer\";\r\nimport {BrowserRouter as Router} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n    <Provider store={createStore()}>\r\n        <Router>\r\n            <RootContainer/>\r\n        </Router>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import {createStore, applyMiddleware} from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {composeWithDevTools} from \"redux-devtools-extension\";\r\nimport rootReducer from \"../reducers/index\";\r\n\r\nexport default function configureStore(initialState) {\r\n    const composedEnhancers = composeWithDevTools(applyMiddleware(thunkMiddleware));\r\n\r\n    const store = createStore(rootReducer, initialState, composedEnhancers);\r\n\r\n    if(module.hot) {\r\n        module.hot.accept('../reducers', () => {\r\n            store.replaceReducer(rootReducer);\r\n        })\r\n    }\r\n\r\n    return store;\r\n}"],"sourceRoot":""}